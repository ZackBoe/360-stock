<script src="/public/javascript/actionheroClient.js"></script>

<script>

ws = false;

function stock(stock){
  console.log(stock);
}

client = new actionheroClient;

client.on('connected',    function(){ ws = true; console.log(ws+' connected!') })
client.on('disconnected', function(){ console.log('disconnected :(') }) //check periodically?

client.on('message',      function(message){
  if(message.stock){ stock(message.stock); }
  if(message.message == "refresh"){
    client.action('stock', function(error, data){
    });
  }
})

client.connect(function(err, details){
  if(err != null) console.log(err);
  else {
    client.roomAdd("stock");
    client.action('stock', function(error, data){ });
  }
});

</script>
